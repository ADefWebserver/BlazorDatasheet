@using BlazorDatasheet.Interfaces
@using BlazorDatasheet.Util
@inherits BaseEditor<DateTime>

<input
    type="date"
    class="date-input"
    @bind="EditedValue"
    @bind:event="oninput"
    style="@CssUtil.GetStyledInput(Cell)"
    @ref="InputRef"/>

@code {

    private IReadOnlyCell Cell { get; set; }

    public override void BeforeEdit(IReadOnlyCell cell)
    {
        Cell = cell;
    }

    public override void BeginEdit(EditEntryMode entryMode, object? editValue, string key)
    {
        var canParse = DateTime.TryParse(editValue?.ToString(), out var parsedDateTime);
        EditedValue = canParse ? parsedDateTime : DateTime.Now;
    }

}