@inherits BaseEditorComponent
@using BlazorDatasheet.Model

<input
    type="text"
    class="text-input"
    @bind="EditString"
    @onclick="() => IsSoftEdit = false"
    @bind:event="oninput"
    @ref="InputRef"/>

@code {

    private ElementReference InputRef;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await InputRef.FocusAsync();
            await base.OnAfterRenderAsync(firstRender);
        }
    }

    public override void BeginEdit(EditEntryMode entryMode, Cell cell, string key)
    {
        EditString = cell.GetValue<string>();
        if (entryMode == EditEntryMode.Key && !String.IsNullOrEmpty(key) && key.Length == 1)
        {
            EditString = key;
            IsSoftEdit = true;
        }
        
        StateHasChanged();
    }

    public override bool CanAcceptEdit() => true;

    public override bool CanCancelEdit() => true;

}